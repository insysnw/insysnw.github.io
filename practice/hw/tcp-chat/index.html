<!DOCTYPE html>
<html lang="ru">
  <head>
    <link rel="stylesheet" href="/fonts/stylesheet.css" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Курс ТКС</title>
    <link
      rel="stylesheet"
      href="/insysnw.css"
    />
	<!--
	  Pins footer to the bottom
	  TODO: place it properly
	-->
    <style>
      .course {
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      body {
        display: flex;
        min-height: 100vh;
        flex-direction: column;
      }

      footer {
        margin-top: auto;
      }
    </style>
  </head>

  <body>
    <div class="course">
      <header>
        <nav class="level nerd">
          <p class="level-item has-text-centered">
		    <a href="/lectures">
              <span class="icon">
                <i class="mdi mdi-24px mdi-book-open-page-variant" aria-hidden="true"></i>
              </span>
              <span class="f3270">Лекции</span>
            </a>
          </p>
          <p class="level-item has-text-centered">
		    <a href="/practice">
              <span class="icon">
                <i class="mdi mdi-24px mdi-flask" aria-hidden="true"></i>
              </span>
              <span class="f3270">Практика</span>
            </a>
          </p>
          <p class="level-item has-text-centered">
            <img
              src="https://icst.spbstu.ru/userfiles/files/Risunok-KSPT.png"
              alt="КСПТ"
              style="height: 50px"
            />
          </p>
          <p class="level-item has-text-centered">
		    <a href="/awesome">
              <span class="icon">
                <i class="mdi mdi-24px mdi-sunglasses" style="color: #fc60a8;" aria-hidden="true"></i>
              </span>
              <span class="f3270">Awesome</span>
            </a>
          </p>
          <p class="level-item has-text-centered">
		    <a href="/">
              <span class="icon">
                <i class="mdi mdi-24px mdi-information-outline" aria-hidden="true"></i>
              </span>
              <span class="f3270">О курсе</span>
            </a>
          </p>
        </nav>
      </header>
      <main>
        <section class="section">
          <div class="container">

<h1 class="title">
Домашнее задание: TCP чат
<h1>

<div class="content">
<p>В рамках данной работы необходимо разработать сетевой протокол для чата.
Для его проверки нужно разработать серверное и клиентское Программное Обеспечение (ПО).</p>
<p>Стоит помнить, что вы разрабатываете в первую очередь протокол.
Это значит, что автор клиента для одного и того же протокола (вашего) волен реализовать любую форму отображения сообщения.
В случае консольного клиента:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>&lt;4:20&gt; [Kenobi] Hello there!
</span></code></pre>
<p>А в случае графического:</p>
<p><img src="/chat-bubble.svg" alt="An image of a chat bubble" /></p>
<p>В этом задании реализуется только консольный клиент, но необходимо разрабатывать протокол, учитывая возможность разработки любого другого.</p>
<h2 id="trebovaniia-k-protokolu">Требования к протоколу:</h2>
<ul>
<li>Пользователь может отправлять сообщения только от своего имени</li>
<li>Время в сообщении должно соответствовать реальному времени отправления сообщения</li>
<li>Пользователи разных временных зон должны видеть корректное для себя время</li>
</ul>
<p>Протокол должен быть описан так, чтобы не знакомый с вашей имплементацией разработчик мог написать свою на любом другом языке так, чтобы она оказалась совместима с вашей.
Например, если вы используете строки, то необходимо указать их кодировку.</p>
<h2 id="trebovaniia-k-po">Требования к ПО:</h2>
<ul>
<li>ПО имеет консольный интерфейс</li>
<li>Прямое использование TCP сокетов (без дополнительных абстракций)</li>
<li>К одному серверу может подключаться множество клиентов</li>
<li>Отправляемое сообщение отображается у каждого подключенного в этот момент клиента (т.е. хранение и отображение истории реализовывать не требуется)</li>
<li>Своевременное отображение нового сообщения (действия на клиенте не блокируют получение сообщения)</li>
<li>Всем пользователям приходит уведомление о подключении/отключении очередного пользователя</li>
<li>Возможность отправить сообщение со вложенным файлом</li>
</ul>
<h2 id="trebovaniia-k-otchiotu">Требования к отчёту:</h2>
<ul>
<li>Инструкция по использованию (конфигурационные файлы, переменные окружения, аргументы командной строки, данные передаваемые в <em>stdin</em>)</li>
<li>Инструкции по сборке/установке</li>
<li>Описание используемого сетевого протокола</li>
</ul>
<hr />
<h2 id="life-pro-tips">Life pro tips</h2>
<ul>
<li>Пользовательский интерфейс - дело не последнее, но он не является центром данной лабораторной работы</li>
<li>Ваш протокол будет проверяться на способность справляться с различными данными (содержание и объём)</li>
<li>Преподавательский состав данного курса позитивно относится к бережному отношению к ресурсам</li>
</ul>
<hr />
<h2 id="tipichnye-oshibki">Типичные ошибки</h2>
<p>Ваши коллеги уже наступали на эти грабли, учитесь на чужих ошибках.</p>
<h3 id="ispol-zovanie-strok-vmesto-protokola">Использование строк вместо протокола</h3>
<p>Основой данного задания является разработка протокола, а код - лишь проверка его работоспособности.
Существование протокола в отрыве от конкретной имлементации позволяет легко создать новую.
Например, с вашим сервером одновременно могут общаться совершенно разные клиенты: консольные, графические, вэб и боты, которым пользовательский интерфэйс чата совсем не нужен.
Каждый из этих клиентов может по своему отображать данные.
Так графические интерфейсы обычно не указывают имя автора у каждого из его подряд отправленных сообщений, а время отображают отдельно от текста сообщения.
Наличие протокола позволяет им легко этого добиться, ведь в нём все эти элементы “разложены по полочкам”, а не спрятаны в рамках огромной строки.</p>
<p>Вторая проблема - подтверждение подлинности.
В строке можно указать любое имя пользователя и другие клиенты не смогут отличить реального пользователя от самозванца.
Время тоже никак не подтверждается.
Вам студенты будут рассказывать, что сдали свою работу до дедлайна, ссылаясь на сообщение с отчётом, в котором указана дата ещё до выдачи задания о.О
Ведь никто не мешает составить сообщение с любым временем, хоть <code>&lt;half past nine&gt;</code></p>
<p>Ещё одна проблема на ровном месте - искусственное ограничение используемых символов в сообщении.
Теперь в имени пользователя не может быть как минимум символ и <code>]</code>, ведь с точки зрения клиента это специальный символ окончания имени пользователя.</p>
<h3 id="odno-soobshchenie-odno-chtenie-bufera">Одно сообщение - одно чтение буфера</h3>
<p>Размер буфера - деталь имлементации, не протокола.
Велика вероятность того, что максимальный размер сообщения будет больше буфера, что ведёт к тому, что чтение из буфера один раз приведёт к неполному прочтению сообщения.
Протокол должен обеспечивать понимание того, прочитано ли сообщение целиком.</p>
<h2 id="metodika-proverki">Методика проверки</h2>
<ul>
<li>Запуск
<ul>
<li>сервера и клиента на разных узлах</li>
<li>минимум 2х клиентов на одном узле</li>
</ul>
</li>
<li>Отправление сообщения
<ul>
<li>от имени другого пользователя</li>
<li>из другого часового пояса</li>
<li>со вложенным файлом</li>
</ul>
</li>
</ul>

</div>
</div>
        </section>
      </main>

      <footer class="footer" style="margin-top: auto">
        <div class="content has-text-centered">
          <p>
            Сделяль <a href="https://ejiek.com">@ejiek</a>. Исходный код имеет
            лицензию
            <a href="http://opensource.org/licenses/mit-license.php">MIT</a>.
            Содержимое сайта имеет лицензию
            <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a
            >.
          </p>
        </div>
      </footer>
    </div>
  </body>
</html>
